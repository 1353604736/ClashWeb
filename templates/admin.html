

<!DOCTYPE html>
<html lang="en">

    <head>
        <meta charset="UTF-8">
        <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=yes">
        <meta http-equiv="X-UA-Compatible" content="ie=edge">
        <title>❤️ Clash 控制台 ️️❤️</title>
        <link href="/static/css/style.min.css" media="all" rel="stylesheet" type="text/css" />
        <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.4.1/css/bootstrap.min.css" integrity="sha384-Vkoo8x4CGsO3+Hhxv8T/Q5PaXtkKtu6ug5TOeNV6gBiFeWPGFN9MuhOf23Q9Ifjh" crossorigin="anonymous">
    </head>

<body>  
    <div class="container" style="width: 30rem;">
            <header>
                <h1>🚀 Clash 控制台 🚁</h1>
            </header>
            <!-- Proxy tools -->
        <form method="POST" name = "form1">
                {% with messages = get_flashed_messages() %}
                {% if messages %}
                    {% for message in messages %}
                    <div class="alert alert-warning alert-dismissible fade show" role="alert">
                        <span>{{ message }}</span>
                        <button type="button" class="close" data-dismiss="alert" aria-label="Close">
                          <span aria-hidden="true">&times;</span>
                        </button>
                      </div>
                    {% endfor %}
                {% endif %}
                {% endwith %}  
                <script type="text/javascript">
                    function traffic()
                    {
                        var httpRequest = new XMLHttpRequest();//第一步：建立所需的对象
                        httpRequest.open('GET', 'http://127.0.0.1:9090/traffic', true);//第二步：打开连接  将请求参数写在url中  ps:"./Ptest.php?name=test&nameone=testone"
                        httpRequest.send();//第三步：发送请求  将请求参数写在URL中
                        httpRequest.onreadystatechange = function () {
                            if (httpRequest.readyState == 4 && httpRequest.status == 200) {
                            }
                            var up = JSON.parse(httpRequest.response)['up'];
                            var dowm = JSON.parse(httpRequest.response)['down'];
                            document.getElementById("traffic").innerHTML = '   下载：'+formatBytes(dowm)+' 上传：'+formatBytes(up)
                            httpRequest.abort();
                        }
                        setTimeout("traffic()",1000);
                    }
                    function formatBytes(bytes) {
                        if(bytes < 1024) return bytes + " B";
                        else if(bytes < 1048576) return(bytes / 1024).toFixed(2) + " KB";
                        else if(bytes < 1073741824) return(bytes / 1048576).toFixed(2) + " MB";
                        else return(bytes / 1073741824).toFixed(2) + " GB";
                    }
                    </script>
                  <div id="traffic" class="card">
                     <script type="text/javascript">traffic();</script>
                  </div>
            <div class="card" >
            <h2> 👌 高级设置 </h2>
                <input  type="submit" class="btn btn-primary btn-lg" name= 'submit' value = "更新  geoip""/>
                </br>
                <input  type="submit" class="btn btn-primary btn-lg" name= 'submit' value = "开机    启动""/>
                </br>
                <input  type="submit" class="btn btn-primary btn-lg" name= 'submit' value = "UWP回 环代理""/>
                </br>
                <input  type="submit" class="btn btn-primary btn-lg" name= 'submit' value = "返回    主页""/>
            </div>                        
        </form>  
        <footer>
            <p> &copy;<a href="https://t.me/niconewbeeeapi">API通知频道</a>——<a href="https://t.me/niconewbeeeapi/134"> 打赏支持开发</a>——<a href="https://github.com/lzdnico/subweb"> Web源码</a></p>
        </footer>    
    
    </div>
</body>
</html>
